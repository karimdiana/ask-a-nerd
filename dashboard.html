<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Dashboard - Nerd</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/dashboard.css">
</head>
<body>
    <!-- Top Navigation Bar -->
    <header class="app-header">
        <div class="header-left">
            <a href="account.html" class="user-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M20 21C20 16.5817 16.4183 13 12 13C7.58172 13 4 16.5817 4 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </a>
        </div>
        <div class="header-center">
            <a href="dashboard.html" class="header-logo-link">
                <img src="photos/nerd.png" alt="Nerd" class="header-logo">
            </a>
        </div>
        <div class="header-right">
            <a href="index.html" class="signout-btn">Sign Out</a>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <!-- Greeting Banner -->
            <div class="greeting-banner">
                <h2 class="greeting-text">Welcome back! ðŸ‘‹</h2>
                <p class="greeting-subtitle">Here are nerds in your favorite categories:</p>
            </div>
            
            <!-- Category Filter Tabs -->
            <div class="category-tabs">
                <button class="category-tab active" data-category="all">All</button>
                <button class="category-tab" data-category="business">Business</button>
                <button class="category-tab" data-category="executive">Executive</button>
                <button class="category-tab" data-category="marketing">Marketing</button>
                <button class="category-tab" data-category="academic">Academic</button>
                <button class="category-tab" data-category="entrepreneur">Entrepreneur</button>
                <button class="category-tab" data-category="mentor">Mentoring</button>
                <button class="category-tab" data-category="education">Education</button>
            </div>
            
            <!-- Search and Sort Controls -->
            <div class="controls-row">
                <div class="search-container">
                    <span class="search-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </span>
                    <input type="text" placeholder="Search nerds by name or category..." class="search-input">
                </div>
                <div class="sort-favorites">
                    <button class="favorites-toggle">
                        <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10 17.25L8.55 16.0125C4.15 12.1125 1.25 9.5125 1.25 6.375C1.25 3.775 3.275 1.75 5.875 1.75C7.35 1.75 8.7625 2.4375 9.625 3.5C10.4875 2.4375 11.9 1.75 13.375 1.75C15.975 1.75 18 3.775 18 6.375C18 9.5125 15.1 12.1125 10.7 16.0125L9.25 17.25H10Z" fill="none" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        Favorites
                    </button>
                </div>
            </div>
            
            <!-- Nerds Grid -->
            <div class="nerds-grid">
                <!-- Nerd Card 1 -->
                <div class="nerd-card" data-categories="business,executive">
                    <div class="nerd-card-header">
                        <div class="nerd-info-primary">
                            <h3 class="nerd-name">Andrew DeBad</h3>
                            <span class="online-status"></span>
                        </div>
                        <button class="favorite-btn">
                            <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 17.25L8.55 16.0125C4.15 12.1125 1.25 9.5125 1.25 6.375C1.25 3.775 3.275 1.75 5.875 1.75C7.35 1.75 8.7625 2.4375 9.625 3.5C10.4875 2.4375 11.9 1.75 13.375 1.75C15.975 1.75 18 3.775 18 6.375C18 9.5125 15.1 12.1125 10.7 16.0125L9.25 17.25H10Z" fill="none" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                        </button>
                    </div>
                    <div class="nerd-categories">
                        <span class="category-tag">Business</span>
                        <span class="category-tag">Executive</span>
                    </div>
                    <p class="nerd-mini-bio">VP of Business Development at Ask A Bob ðŸ’¼</p>
                    <div class="nerd-actions">
                        <button class="btn btn-primary btn-chat">Chat with Me</button>
                        <button class="btn btn-outline btn-about">About Me</button>
                    </div>
                    <div class="nerd-image" data-profile-pic="photos/andrew.png"></div>
                </div>
                
                <!-- Nerd Card 2 -->
                <div class="nerd-card" data-categories="marketing,business,academic">
                    <div class="nerd-card-header">
                        <div class="nerd-info-primary">
                            <h3 class="nerd-name">Lisa Menu</h3>
                            <span class="online-status"></span>
                        </div>
                        <button class="favorite-btn">
                            <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 17.25L8.55 16.0125C4.15 12.1125 1.25 9.5125 1.25 6.375C1.25 3.775 3.275 1.75 5.875 1.75C7.35 1.75 8.7625 2.4375 9.625 3.5C10.4875 2.4375 11.9 1.75 13.375 1.75C15.975 1.75 18 3.775 18 6.375C18 9.5125 15.1 12.1125 10.7 16.0125L9.25 17.25H10Z" fill="none" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                        </button>
                    </div>
                    <div class="nerd-categories">
                        <span class="category-tag">Marketing</span>
                        <span class="category-tag">Academic</span>
                    </div>
                    <p class="nerd-mini-bio">Clinical Assistant Professor of Marketing ðŸ“š</p>
                    <div class="nerd-actions">
                        <button class="btn btn-primary btn-chat">Chat with Me</button>
                        <button class="btn btn-outline btn-about">About Me</button>
                    </div>
                    <div class="nerd-image" data-profile-pic="photos/lisa.png"></div>
                </div>
                
                <!-- Nerd Card 3 -->
                <div class="nerd-card" data-categories="business,entrepreneur,mentor">
                    <div class="nerd-card-header">
                        <div class="nerd-info-primary">
                            <h3 class="nerd-name">Karl Fruit</h3>
                            <span class="online-status offline"></span>
                        </div>
                        <button class="favorite-btn">
                            <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 17.25L8.55 16.0125C4.15 12.1125 1.25 9.5125 1.25 6.375C1.25 3.775 3.275 1.75 5.875 1.75C7.35 1.75 8.7625 2.4375 9.625 3.5C10.4875 2.4375 11.9 1.75 13.375 1.75C15.975 1.75 18 3.775 18 6.375C18 9.5125 15.1 12.1125 10.7 16.0125L9.25 17.25H10Z" fill="none" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                        </button>
                    </div>
                    <div class="nerd-categories">
                        <span class="category-tag">Entrepreneurship</span>
                        <span class="category-tag">Mentoring</span>
                    </div>
                    <p class="nerd-mini-bio">Co-Founder and Master of Mentoring ðŸš€</p>
                    <div class="nerd-actions">
                        <button class="btn btn-primary btn-chat">Chat with Me</button>
                        <button class="btn btn-outline btn-about">About Me</button>
                    </div>
                    <div class="nerd-image" data-profile-pic="photos/karl.png"></div>
                </div>
                
                <!-- Nerd Card 4 -->
                <div class="nerd-card" data-categories="education,academic">
                    <div class="nerd-card-header">
                        <div class="nerd-info-primary">
                            <h3 class="nerd-name">Chadi Brush</h3>
                            <span class="online-status"></span>
                        </div>
                        <button class="favorite-btn active">
                            <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 17.25L8.55 16.0125C4.15 12.1125 1.25 9.5125 1.25 6.375C1.25 3.775 3.275 1.75 5.875 1.75C7.35 1.75 8.7625 2.4375 9.625 3.5C10.4875 2.4375 11.9 1.75 13.375 1.75C15.975 1.75 18 3.775 18 6.375C18 9.5125 15.1 12.1125 10.7 16.0125L9.25 17.25H10Z" fill="currentColor" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                        </button>
                    </div>
                    <div class="nerd-categories">
                        <span class="category-tag">Education</span>
                        <span class="category-tag">Business</span>
                    </div>
                    <p class="nerd-mini-bio">Executive Director of Continuing Studies ðŸŽ“</p>
                    <div class="nerd-actions">
                        <button class="btn btn-primary btn-chat">Chat with Me</button>
                        <button class="btn btn-outline btn-about">About Me</button>
                    </div>
                    <div class="nerd-image" data-profile-pic="photos/chadi.png"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- About Me Modal (Hidden by default) -->
    <div class="modal-overlay hidden" id="aboutModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">About Nerd</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-content">
                <div class="about-nerd-profile">
                    <div class="about-nerd-header">
                        <div class="about-nerd-avatar" id="modal-avatar" style="background-image: url('photos/andrew.png');"></div>
                        <div>
                            <h3 class="about-nerd-name" id="modal-name">Andrew DeBad</h3>
                            <div class="about-nerd-categories" id="modal-categories">
                                <span class="category-tag">Business</span>
                                <span class="category-tag">Executive</span>
                            </div>
                        </div>
                    </div>
                    
                    <p class="about-nerd-bio" id="modal-bio">
                        Andrew DeBad serves as Inglet Blair, a QC Ally Company's Vice President of Business Development. 
                        In this role, he fosters lasting relationships through a commitment to true partnership with both 
                        new and existing clients.
                        <br><br>
                        Seasoned in the realms of finance and technology, Andrew brings over 20 years of diverse experience 
                        as a founder and C-suite executive. He has successfully navigated businesses from startups to Fortune 
                        500 companies, specializing in operations, product and business development, as well as client service 
                        management.
                        <br><br>
                        Andrew's approach is rooted in strategic growth, innovation, and fostering mentally healthy workplace 
                        cultures. Passionate about mental health advocacy and a compelling communicator, he is dedicated to 
                        guiding companies towards sustainable success and cultivating next-level teams.
                    </p>
                    
                    <div class="about-company" id="modal-company">
                        <h4>About Ask A Bob</h4>
                        <p>Get Instant Answers for your Enterprise Teams. It's like having a trusted ally in your corner, 
                        ready to tackle all of your business needs. Your own private, secure LLM trained with your company's 
                        data, helping your teams learn and move at lightspeed.</p>
                    </div>
                    
                    <div class="about-nerd-reviews">
                        <h4>Reviews</h4>
                        <div class="review-item">
                            <div class="review-header">
                                <span class="review-author">Sarah T.</span>
                                <div class="review-stars">â˜…â˜…â˜…â˜…â˜…</div>
                            </div>
                            <p class="review-text">Andrew provided invaluable insights for our business strategy. His experience is evident in every conversation.</p>
                        </div>
                        <div class="review-item">
                            <div class="review-header">
                                <span class="review-author">Michael L.</span>
                                <div class="review-stars">â˜…â˜…â˜…â˜…â˜…</div>
                            </div>
                            <p class="review-text">A true business development expert. Andrew helped us navigate complex partnership negotiations with ease.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary btn-chat-modal">Chat with Me</button>
            </div>
        </div>
    </div>

    <!-- Chat Panel Styling -->
    <style>
        /* Chat Panel Container */
        .chat-panel {
            position: fixed;
            right: 20px;
            bottom: 20px;
            width: 380px;
            max-width: calc(100vw - 40px);
            height: 600px;
            max-height: calc(100vh - 100px);
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        @media (max-width: 768px) {
            .chat-panel {
                right: 0;
                bottom: 0;
                width: 100%;
                height: 100vh;
                max-height: 100vh;
                border-radius: 0;
            }
        }

        /* Chat Header */
        .chat-header {
            padding: 16px 20px;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
            border-top-left-radius: 16px;
            border-top-right-radius: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e293b;
            margin: 0;
        }

        .chat-close {
            background: none;
            border: none;
            font-size: 24px;
            color: #64748b;
            cursor: pointer;
            padding: 4px;
            line-height: 1;
        }

        /* Chat Messages Area */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            background: #f8fafc;
        }

        /* Message Bubbles Base Styles */
        .chat-message {
            max-width: 80%;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .message-content {
            margin: 0;
            padding: 12px 16px;
            font-size: 0.95rem;
            line-height: 1.5;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* User Message Styling */
        .user-message .message-content {
            background: #2563eb;
            color: white;
            border-radius: 16px 16px 4px 16px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        /* Nerd Message Styling */
        .nerd-message .message-content {
            background: white;
            color: #1e293b;
            border-radius: 16px 16px 16px 4px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }

        /* Message Time */
        .message-time {
            font-size: 0.75rem;
            color: #64748b;
            padding: 0 8px;
        }

        .user-message .message-time {
            align-self: flex-end;
        }

        .nerd-message .message-time {
            align-self: flex-start;
        }

        /* Code Formatting */
        .message-content code {
            background-color: rgba(0, 0, 0, 0.05);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9em;
        }

        .message-content pre {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 8px 0;
        }

        .message-content pre code {
            background-color: transparent;
            color: inherit;
            padding: 0;
        }

        /* Typing Indicator */
        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 12px 16px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 16px 16px 16px 4px;
            align-self: flex-start;
            max-width: 80%;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .typing-indicator span {
            width: 4px;
            height: 4px;
            background-color: #94a3b8;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
            opacity: 0.6;
        }

        @keyframes typing {
            0%, 100% { transform: translateY(0); opacity: 0.6; }
            50% { transform: translateY(-4px); opacity: 1; }
        }

        /* Input Area */
        .chat-input-area {
            padding: 16px;
            background: white;
            border-top: 1px solid #e2e8f0;
        }

        .chat-input {
            width: 100%;
            padding: 12px 50px 12px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 24px;
            font-size: 0.95rem;
            line-height: 1.5;
            resize: none;
            max-height: 120px;
            transition: all 0.2s ease;
        }

        .chat-input:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.1);
        }

        /* Send Button */
        .chat-send-btn {
            position: absolute;
            right: 24px;
            bottom: 24px;
            background: #2563eb;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .chat-send-btn:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }

        .chat-send-btn:disabled {
            background: #94a3b8;
            cursor: not-allowed;
            transform: none;
        }

        .chat-send-btn svg {
            width: 18px;
            height: 18px;
        }

        /* Error Message */
        .chat-message.error p {
            background-color: #fef2f2;
            color: #dc2626;
            border: 1px solid #fecaca;
        }

        /* Nerd Card Styles */
        .nerd-card {
            position: relative;
            background: #fff;
            border-radius: 16px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
            min-height: 200px;
        }

        .nerd-image {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border: 2px solid #e2e8f0;
            transition: all 0.2s ease;
        }

        @media (max-width: 768px) {
            .nerd-image {
                width: 60px;
                height: 60px;
                top: 15px;
                right: 15px;
            }
        }

        /* Header styles moved to main.css */
        
        /* Nerd Card Styles */
        .nerd-card {
            position: relative;
            background: #fff;
            border-radius: 16px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
            min-height: 200px;
        }

        .nerd-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            width: 100%;
            padding-right: 90px; /* Make space for the image */
        }

        .favorite-btn {
            background: none;
            border: none;
            padding: 4px;
            cursor: pointer;
            color: #64748b;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .favorite-btn:hover {
            color: #dc2626;
            transform: scale(1.1);
        }

        .favorite-btn.active {
            color: #dc2626;
        }
    </style>

    <!-- Chat Panel -->
    <div class="chat-panel hidden" id="chatPanel">
        <div class="chat-header">
            <h3 class="chat-title">Chat with <span class="chat-nerd-name">Andrew DeBad</span></h3>
            <button class="chat-close">&times;</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <!-- Messages will be added here -->
        </div>
        <div class="chat-input-area">
            <textarea class="chat-input" placeholder="Type your message..." id="chatInput"></textarea>
            <button class="chat-send-btn" id="sendMessage" disabled>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22 2L11 13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        // Preload images
        const imagesToPreload = [
            'photos/andrew.png',
            'photos/lisa.png',
            'photos/karl.png',
            'photos/chadi.png'
        ];
        
        imagesToPreload.forEach(src => {
            const img = new Image();
            img.src = src;
        });
        
        document.addEventListener('DOMContentLoaded', function() {
            // Data for each nerd
            const nerdProfiles = {
                'Andrew DeBad': {
                    categories: ['Business', 'Executive'],
                    bio: `Andrew DeBad serves as Inglet Blair, a QC Ally Company's Vice President of Business Development. 
                          In this role, he fosters lasting relationships through a commitment to true partnership with both 
                          new and existing clients.
                          <br><br>
                          Seasoned in the realms of finance and technology, Andrew brings over 20 years of diverse experience 
                          as a founder and C-suite executive. He has successfully navigated businesses from startups to Fortune 
                          500 companies, specializing in operations, product and business development, as well as client service 
                          management.
                          <br><br>
                          Andrew's approach is rooted in strategic growth, innovation, and fostering mentally healthy workplace 
                          cultures. Passionate about mental health advocacy and a compelling communicator, he is dedicated to 
                          guiding companies towards sustainable success and cultivating next-level teams.`,
                    company: {
                        name: 'Ask A Bob',
                        description: `Get Instant Answers for your Enterprise Teams. It's like having a trusted ally in your corner, 
                                     ready to tackle all of your business needs. Your own private, secure LLM trained with your company's 
                                     data, helping your teams learn and move at lightspeed.`
                    },
                    avatar: 'photos/andrew.png',
                    reviews: [
                        {
                            author: 'Sarah T.',
                            stars: 5,
                            text: 'Andrew provided invaluable insights for our business strategy. His experience is evident in every conversation.'
                        },
                        {
                            author: 'Michael L.',
                            stars: 5,
                            text: 'A true business development expert. Andrew helped us navigate complex partnership negotiations with ease.'
                        }
                    ]
                },
                'Lisa Menu': {
                    categories: ['Marketing', 'Academic'],
                    bio: `Lisa Menu is a Clinical Assistant Professor of Marketing in the Department of Management and Marketing. 
                          Upon graduating from the Doctorate of Business Administration Program, Hough Graduate School of Business, 
                          University of Florida, she took a visiting assistant marketing professor position at Purdue University Fort Wayne.
                          <br><br>
                          Her academic journey began because of her desire to share her experiences with others who were starting 
                          their careers. She has held senior positions at large regional banks in the Midwest and Mid-Atlantic. 
                          In 2013, Lisa and her husband decided to move back to Michigan.
                          <br><br>
                          She took this unique opportunity to utilize her industry experience and academic background to enter academia. 
                          Obtaining her doctorate and teaching at the college level has been a dream career for her for many years.
                          <br><br>
                          She also completed the 2018 Chicago Marathon.`,
                    company: {
                        name: 'Purdue University',
                        description: `As a marketing manager and product innovator, Lisa's primary role was creating marketing strategies 
                                     and introducing new products and services to consumers. Her success can be attributed to knowing the 
                                     customer, understanding the business, and looking for opportunities to develop competitive advantages.`
                    },
                    avatar: 'photos/lisa.png',
                    reviews: [
                        {
                            author: 'David R.',
                            stars: 5,
                            text: 'Lisa\'s marketing expertise transformed our approach to customer engagement. Her academic insights combined with practical experience are invaluable.'
                        },
                        {
                            author: 'Jennifer K.',
                            stars: 5,
                            text: 'Outstanding mentor in marketing strategy. Lisa helped us develop a comprehensive digital marketing plan that exceeded our expectations.'
                        }
                    ]
                },
                'Karl Fruit': {
                    categories: ['Entrepreneurship', 'Mentoring'],
                    bio: `Karl mentors and guides student teams, and actively recruits other business professionals to lend their 
                          own time and expertise to programs. As a successful intrapreneur, Karl has the knowledge and experience to 
                          help others identify market opportunities and growth targets with strategy, technology and know-how.
                          <br><br>
                          Showing that inspiration can come at any time, Karl and Michael Miles proved that a few years back as they 
                          were reflecting on education at a graduation party and were inspired to start Uncharted Learning. Their goal 
                          was to shape the future of high school business education with an approach that engaged and empowered students 
                          in new ways.
                          <br><br>
                          Looking Back: "I've been able to have an impact on some cool businesses and amazing projects, along side some good people."
                          <br>
                          Looking forward: "Let's get students to create their own similar experiences."`,
                    company: {
                        name: 'Uncharted Learning',
                        description: `"There are only two types of people in the world: People afraid to try, and people not afraid to be wrong."
                                     Karl's wisdom and approach to entrepreneurship has shaped the educational experience of many students.`
                    },
                    avatar: 'photos/karl.png',
                    reviews: [
                        {
                            author: 'Alex M.',
                            stars: 5,
                            text: 'Karl\'s mentorship was instrumental in launching our startup. His entrepreneurial insights and practical guidance are gold.'
                        },
                        {
                            author: 'Rachel S.',
                            stars: 5,
                            text: 'Exceptional advisor for young entrepreneurs. Karl\'s approach to problem-solving and business development is both innovative and practical.'
                        }
                    ]
                },
                'Chadi Brush': {
                    categories: ['Education', 'Business'],
                    bio: `Chadi Brush serves as the Executive Director of Continuing Studies, bringing valuable expertise in 
                          educational administration and business practices to the role. With a Master of Business Administration 
                          degree, Chadi combines strong academic credentials with practical business experience.
                          <br><br>
                          He is responsible for developing and implementing continuing education programs, working closely with 
                          faculty and industry partners to ensure course offerings meet the needs of adult learners and professionals 
                          seeking to advance their careers.
                          <br><br>
                          Chadi's leadership focuses on creating accessible, high-quality educational opportunities that bridge 
                          the gap between academic knowledge and workforce demands in the modern economy.`,
                    company: {
                        name: 'Continuing Studies Department',
                        description: `The Continuing Studies Department offers professional development courses, certificate programs, 
                                     and non-degree learning opportunities for adult learners looking to enhance their skills or 
                                     transition to new career paths.`
                    },
                    avatar: 'photos/chadi.png',
                    reviews: [
                        {
                            author: 'Patricia N.',
                            stars: 5,
                            text: 'Chadi\'s expertise in educational program development is outstanding. He helped us create a cutting-edge professional development curriculum.'
                        },
                        {
                            author: 'Robert W.',
                            stars: 5,
                            text: 'Brilliant educator and administrator. Chadi\'s insights into continuing education and professional development are transformative.'
                        }
                    ]
                }
            };

            // Load profile images for cards
            const profilePics = document.querySelectorAll('.nerd-image');
            
            profilePics.forEach(pic => {
                const card = pic.closest('.nerd-card');
                const nerdName = card.querySelector('.nerd-name').textContent;
                const nerdData = nerdProfiles[nerdName];
                
                if (nerdData) {
                    pic.style.backgroundImage = `url('${nerdData.avatar}')`;
                    pic.style.display = 'block';
                }
            });
            
            // Category tabs functionality
            const categoryTabs = document.querySelectorAll('.category-tab');
            const nerdCards = document.querySelectorAll('.nerd-card');
            
            categoryTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs
                    categoryTabs.forEach(t => t.classList.remove('active'));
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    const selectedCategory = this.getAttribute('data-category');
                    
                    // Filter nerd cards
                    nerdCards.forEach(card => {
                        const categories = card.getAttribute('data-categories').split(',');
                        
                        if (selectedCategory === 'all') {
                            card.style.display = 'flex';
                        } else if (categories.includes(selectedCategory)) {
                            card.style.display = 'flex';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });

            // Search functionality
            const searchInput = document.querySelector('.search-input');
            
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase().trim();
                
                nerdCards.forEach(card => {
                    const name = card.querySelector('.nerd-name').textContent.toLowerCase();
                    const categories = card.getAttribute('data-categories').toLowerCase();
                    const bio = card.querySelector('.nerd-mini-bio').textContent.toLowerCase();
                    
                    if (
                        name.includes(searchTerm) || 
                        categories.includes(searchTerm) || 
                        bio.includes(searchTerm)
                    ) {
                        card.style.display = 'flex';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });

            // Favorite button functionality
            const favoriteButtons = document.querySelectorAll('.favorite-btn');
            favoriteButtons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation(); // Prevent triggering card click
                    this.classList.toggle('active');
                    const path = this.querySelector('path');
                    if (this.classList.contains('active')) {
                        path.setAttribute('fill', 'currentColor');
                    } else {
                        path.setAttribute('fill', 'none');
                    }
                });
            });
            
            // Favorites toggle functionality
            const favoritesToggle = document.querySelector('.favorites-toggle');
            let showingFavorites = false;
            
            favoritesToggle.addEventListener('click', function() {
                showingFavorites = !showingFavorites;
                
                if (showingFavorites) {
                    this.classList.add('active');
                    nerdCards.forEach(card => {
                        const isFavorite = card.querySelector('.favorite-btn').classList.contains('active');
                        card.style.display = isFavorite ? 'flex' : 'none';
                    });
                } else {
                    this.classList.remove('active');
                    // Show all cards or respect the current category filter
                    const activeCategory = document.querySelector('.category-tab.active').getAttribute('data-category');
                    nerdCards.forEach(card => {
                        const categories = card.getAttribute('data-categories').split(',');
                        if (activeCategory === 'all') {
                            card.style.display = 'flex';
                        } else if (categories.includes(activeCategory)) {
                            card.style.display = 'flex';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                }
            });

            // About Me button functionality
            const aboutButtons = document.querySelectorAll('.btn-about');
            const aboutModal = document.getElementById('aboutModal');
            const modalClose = document.querySelector('.modal-close');
            
            aboutButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Get the nerd name from the card
                    const card = this.closest('.nerd-card');
                    const nerdName = card.querySelector('.nerd-name').textContent;
                    const nerdData = nerdProfiles[nerdName];
                    
                    if (nerdData) {
                        // Update modal content
                        document.getElementById('modal-name').textContent = nerdName;
                        document.getElementById('modal-bio').innerHTML = nerdData.bio;
                        
                        // Update categories
                        const categoriesContainer = document.getElementById('modal-categories');
                        categoriesContainer.innerHTML = '';
                        nerdData.categories.forEach(category => {
                            const span = document.createElement('span');
                            span.className = 'category-tag';
                            span.textContent = category;
                            categoriesContainer.appendChild(span);
                        });
                        
                        // Update company info
                        const companySection = document.getElementById('modal-company');
                        companySection.innerHTML = `
                            <h4>About ${nerdData.company.name}</h4>
                            <p>${nerdData.company.description}</p>
                        `;
                        
                        // Update avatar
                        const avatar = document.getElementById('modal-avatar');
                        avatar.style.backgroundImage = `url('${nerdData.avatar}')`;
                    }
                    
                    // Show modal
                    aboutModal.classList.remove('hidden');
                });
            });
            
            modalClose.addEventListener('click', function() {
                aboutModal.classList.add('hidden');
            });
            
            // Chat functionality
            const chatPanel = document.getElementById('chatPanel');
            const chatMessages = document.getElementById('chatMessages');
            const chatInput = document.getElementById('chatInput');
            const sendButton = document.getElementById('sendMessage');
            const chatButtons = document.querySelectorAll('.btn-chat, .btn-chat-modal');
            let currentNerdName = '';
            let currentNerdExpertise = '';

            // Enable/disable send button based on input
            chatInput.addEventListener('input', function() {
                sendButton.disabled = !this.value.trim();
            });

            // Handle Enter key
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    if (!sendButton.disabled) {
                        sendMessage();
                    }
                }
            });

            // Click handler for send button
            sendButton.addEventListener('click', sendMessage);

            // Chat button click handler
            chatButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                        const card = this.closest('.nerd-card');
                    const modal = document.getElementById('aboutModal');
                    
                    // Get nerd info either from card or modal
                    if (card) {
                        currentNerdName = card.querySelector('.nerd-name').textContent;
                        currentNerdExpertise = card.querySelector('.category-tag').textContent;
                    } else if (modal && !modal.classList.contains('hidden')) {
                        currentNerdName = document.getElementById('modal-name').textContent;
                        currentNerdExpertise = document.querySelector('#modal-categories .category-tag').textContent;
                    }

                    // Update chat panel
                    document.querySelector('.chat-nerd-name').textContent = currentNerdName;
                    chatPanel.classList.remove('hidden');
                    
                    // Only clear and add welcome message if there are no messages
                    if (!chatMessages.children.length) {
                        // Add welcome message
                        addMessage({
                            role: 'assistant',
                            content: `I'm ${currentNerdName}, ready to help with ${currentNerdExpertise}.`
                        });
                    }

                    // Focus input
                    chatInput.focus();

                    // Close the modal if it's open
                    if (modal && !modal.classList.contains('hidden')) {
                        modal.classList.add('hidden');
                    }
                });
            });
            
            // Close chat panel
            document.querySelector('.chat-close').addEventListener('click', function() {
                chatPanel.classList.add('hidden');
            });
            
            function addMessage(message) {
                // Only proceed if we have actual content
                if (!message || (!message.content && !message.error)) {
                    return;
                }

                const messageDiv = document.createElement('div');
                messageDiv.className = `chat-message ${message.role === 'user' ? 'user-message' : 'nerd-message'}`;
                
                const content = message.error || message.content;
                
                // Skip if content is empty after trimming
                if (!content || !content.trim()) {
                    return;
                }

                // For assistant messages, use marked only if content contains markdown
                let formattedContent = content;
                if (message.role === 'assistant' && !message.error) {
                    try {
                        formattedContent = marked.parse(content);
                    } catch (e) {
                        formattedContent = content;
                    }
                }

                const contentWrapper = document.createElement('div');
                contentWrapper.className = 'message-content';
                contentWrapper.innerHTML = formattedContent;

                const timeSpan = document.createElement('span');
                timeSpan.className = 'message-time';
                timeSpan.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

                messageDiv.appendChild(contentWrapper);
                messageDiv.appendChild(timeSpan);
                
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            function addTypingIndicator() {
                const indicator = document.createElement('div');
                indicator.className = 'typing-indicator';
                indicator.innerHTML = '<span></span><span></span><span></span>';
                chatMessages.appendChild(indicator);
                chatMessages.scrollTop = chatMessages.scrollHeight;
                return indicator;
            }

            async function sendMessage() {
                const message = chatInput.value.trim();
                if (!message) return;

                // Clear input and disable send button
                chatInput.value = '';
                sendButton.disabled = true;

                // Add user message
                addMessage({
                    role: 'user',
                    content: message
                });

                // Add typing indicator
                const typingIndicator = addTypingIndicator();

                try {
                    const response = await fetch('http://localhost:3000/api/chat', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message,
                            nerdName: currentNerdName,
                            nerdExpertise: currentNerdExpertise
                        })
                    });

                    // Remove typing indicator before processing response
                    typingIndicator.remove();

                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }

                    const data = await response.json();

                    if (data.status === 'success' && data.response) {
                        addMessage({
                            role: 'assistant',
                            content: data.response
                        });
                    } else {
                        throw new Error(data.error || 'Unknown error occurred');
                    }
                } catch (error) {
                    console.error('Chat error:', error);
                    
                    addMessage({
                        role: 'assistant',
                        error: 'I apologize, but I encountered an error. Please make sure the server is running and try again.'
                    });
                }

                // Focus back on input
                chatInput.focus();
            }

            // Update the chat input to auto-resize
            chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
                this.style.height = Math.min(this.scrollHeight, 120) + 'px';
            });

            // Handle mobile viewport adjustments
            function adjustViewportForMobile() {
                const viewport = document.querySelector('meta[name=viewport]');
                if (window.innerWidth <= 768) {
                    viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
                    document.body.style.height = window.innerHeight + 'px';
                }
            }

            window.addEventListener('resize', adjustViewportForMobile);
            adjustViewportForMobile();
        });
    </script>
</body>
</html> 